<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내가 과연 고인물일까?</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .thumbImg{
            width:80px;
            margin:20px;
        }
        .thumbImg:hover{
            width:90px;
        }
        .title{
            font-size: 15px;
            color: black;
            text-decoration: none;
        }
        .title:hover{
            font-weight: bolder;
            font-size: 18px;
        }
    </style>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9SLWL71F13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9SLWL71F13');
</script>
</head>
<body>
    <div id="nav">
        <div id="logo">
           <a href="index.html"> <img src="go.jpg" width="150px"></a>
        </div>
        <div id="title"> 
            <a style="text-decoration-line: none;" href="index.html"> 
                <h1 style="text-align: center; margin: auto; text-decoration-line: none; color: black;">GOINMOOL SITE </h1>
            </a>   
        </div>
    </div>
    <div id="sidebarRight" style="width:95%;">
        <div id="rankZone" style="margin-top:20px; padding:5px; width:95%; background-color: black; border:2px solid gold; color:goldenrod; text-align: center;">
            <img src="rankGold.png" width="50px" margin:auto;>
            <table id="rankDiv" width="85%">
                <th>닉네임</th>
                <th>점수</th>

            </table>
        </div>
    </div>
    <div class="container" style="margin-top:20px;  float:left; width:95%;">
   
       
        <div class="row" style="padding-left:50px; padding-top: 100px;  float:left; width: 90%;">
            <table border="0" >
                <th></th>
                <th></th>
                <tr><!-- 첫번째 줄 시작 -->
                    <td><a class="thumb" href="highKick/highKick1.html"><img src="thumb1.png" class="thumbImg"></a></td>
                    <td><a class ="title" href="highKick/highKick1.html">거침없이하이킥 고인물 테스트</a></td>
                </tr><!-- 첫번째 줄 끝 -->
                <tr><!-- 두번째 줄 시작 -->
                    <td><a class="thumb" href="mudo/mudo.html"><img src="thumb2.jpg" class="thumbImg"></a></td>
                    <td><a class ="title" href="mudo/mudo.html">무한도전 고인물 테스트</td>
                </tr><!-- 두번째 줄 끝 -->
                <tr><!-- 세번째 줄 시작 -->
                    <td><a class="thumb" href="mim/mim.html"><img src="thumb3.png" class="thumbImg"></a></td>
                    <td><a class ="title" href="mim/mim.html">영화 밈 고인물 테스트</td>
                </tr><!-- 세번째 줄 끝 -->
                </table>
                <div style="margin-top: 20px; border:black solid 1px; padding:15px;">
                    <form id="commentForm">
                        <label for="username">닉네임:</label>
                        <input type="text" id="username" required style="width:80px;" />
                
                        <label for="comment">댓글:</label>
                        <input type="text" id="comment" required style="width:150px;" />
                        <button type="submit">제출</button>
                    </form>
              
                    <div id="commentList" style="margin-top: 20px;"></div>
                </div>
        </div>
     

    </div>
    
  



<script>
    const commentForm = document.getElementById('commentForm');
    const commentDiv = document.getElementById('commentDiv');
// 페이지가 로드될 때 기존 댓글 불러오기
window.onload = function () {
  loadComments();
  loadRank();
  clearAllCookies();
};


// 댓글 작성 폼 제출 시 실행될 함수
document.getElementById('commentForm').onsubmit = function (e) {
e.preventDefault();

// 입력된 이름과 댓글 내용 가져오기
let name = document.getElementById('username').value;
let comment = document.getElementById('comment').value;

// 댓글 객체 생성
let newComment = {
  user: name,
  review: comment,
};

// 기존 댓글 배열 가져오기
let comments = getComments();

// 새로운 댓글 추가
comments.push(newComment);

// 변경된 댓글 배열 저장
localStorage.setItem('comments', JSON.stringify(comments));

// 댓글 목록 다시 불러오기
loadComments();

// 폼 초기화
document.getElementById('commentForm').reset();
};

function getComments() {
  let comments = localStorage.getItem('comments');

  if (comments) {
    return JSON.parse(comments);
  } else {
    return [];
  }
}

function loadComments() {
  let commentList = document.getElementById('commentList');
  commentList.innerHTML = '';

  let comments = getComments();

  for (let i = 0; i < comments.length; i++) {
    let comment = comments[i];

    let listItem = document.createElement('li');
    listItem.innerHTML =
      '<strong>' + comment.user + ':</strong> ' + comment.review;

    commentList.appendChild(listItem);
  }
}
function loadRank(){
    let rankList = document.getElementById('rankDiv');
    rankList.innerHTML ='';
    
    ranks = document.cookie;
    console.log(ranks);
    ARRcookies=document.cookie.split(";");
    console.log(ARRcookies);

    const valueToRemove = '_ga=GA1.1.2127838262.1710666976';
    const valueToRemove2 = '_ga_9SLWL71F13=GS1.1.1710924553.13.1.1710927231.60.0.1817009817';

    for(let i = 0; i < ARRcookies.length; i++) {
    if (ARRcookies[i] === valueToRemove || ARRcookies[i]=== valueToRemove2) {
        ARRcookies.splice(i, 1);
        }
    }

    for(let i=0; i<ARRcookies.length; i++){
        let rank = ARRcookies[i];
        let rankId = ARRcookies[i].split('=')[0];
        let score = ARRcookies[i].split('=')[1];
        let listItem1 = document.createElement('tr');
        let listItem2 = document.createElement('td');
        let listItem3 = document.createElement('td');
        listItem2.innerHTML = '<strong>' + rankId + '</strong> ';
        listItem3.innerHTML = score;
        rankList.appendChild(listItem1);
        rankList.appendChild(listItem2);
        rankList.appendChild(listItem3);
        listItem2.style.textAlign = "left";
        listItem2.style.width ="150px";
        listItem3.style.textAlign = "right";
    }
}
function clearAllCookies() {
  var doc = document,
      domain = doc.domain,
      path = '/',
      cookies = doc.cookie.split(';'),
      now = +(new Date);
  for (var i = cookies.length - 1; i >= 0; i--) {
    doc.cookie = cookies[i].split('=')[0] + '=; expires= Sat, 01 Jan 1972 00:00:00 GMT'; domain=' + domain + '; path=' + path';
  }
}




</script>

</body>
</html>
